env:
  global:
    - secure: UQV538l1KkB0vf8E51CxsWo7L3Cw2QOuNpApKp57LimurGynQ8nQ5HIiCWGuMpN2AFnPn0rYCKsftZihJJlIPYlrJB2miUTFiftCj92GFJpGGBoJcCVLD2Lc6n6UDLgqPGBtgA9g1WQSRQhDRyZbkkMcms41Gnkb5Ic8pLSXfYrTFlZT8yHs/i0hOgcQ9DLUBqgovNOEYI/aP1eIkKE+RPdsoaL7AL5pATIG8HAZnc0gIrwtQ+CEb9qFoffT33oFhxoIqxSbzCsee746EfsHcaxD5mHeAcPrBa3tb3W+NlvRQnqd8vqg7TnNsKnxPfM8fEt+wzQwY0kJbQVws3GACnnD3ePFPnbh7tjEwmsnDadO/a++iRQDages3WYJ4BjpDER9ZIA0LrG4lV5SGYNz18oa/bd+TSr9lIv4odyjysIc3Jodc4lqQHnk3IP6eOvCh68hTl5G6vJuirBe2Pa84H/RhmXNkg+lp1VMN6KyxvAUTZj9gdXZ71uEcNBdACanCf/5YHmeGS4U8n0pQLwYnnDIK2J+vOtzL4uxRpg6MTx9WPahVJVWD0YRdC/hSRk0gFxVlDauqDXra0wAYA15Y92nWEHLPYwrs6WSmo4dbaev16gJZTc9p/FA6OBizRvwT5FH7k/O0qVjh2yJ1aWZ8fes2A9aEr1ii9vn1IFgXjg=
    - GIT_NAME: Travis CI
    - GIT_EMAIL: dead-hosts@funilrys.com
    - TRAVIS_REPO_SLUG: dead-hosts/hosts_git_tyzbit
    - GIT_BRANCH: master
    - UPDATE_ME_LOCATION: https://raw.githubusercontent.com/dead-hosts/repository-structure/master/update_me.py
    - ADMIN_LOCATION: https://raw.githubusercontent.com/dead-hosts/repository-structure/master/admin.py

dist: xenial
sudo: required

language: python

python:
  - "3.7"

matrix:
  fast_finish: true

cache:
  - pip

addons:
  apt:
    packages:
      - dos2unix

install:
  - pip3 install --upgrade pip
  - pip3 install requests

before_script:
  - if [[ ! -f .administrators ]]; then wget "${UPDATE_ME_LOCATION}" -o /dev/null -O update_me.py && chmod +x update_me.py; else echo "update_me not downloaded :)"; fi
  - if [[ ! -f .administrators ]]; then wget "${ADMIN_LOCATION}" -o /dev/null -O admin.py && chmod +x admin.py; else echo "admin not downloaded :)"; fi

script:
  - python3 update_me.py

notifications:
  on_success: change
  on_failure: always
